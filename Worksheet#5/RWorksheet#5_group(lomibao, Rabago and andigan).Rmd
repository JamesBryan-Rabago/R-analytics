---
title: "RWorksheet#5_group(Lomibao,rabago and andigan)"
output: pdf_document
date: "2024-11-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(kableExtra)
library("rvest")
library("polite")
library("dplyr")


polite::use_manners(save_as = 'polite_scrape.R')
  
url <- "https://www.imdb.com/chart/toptv/"
  
 session <- bow(url, 
                 user_agent = "Student education purpose")
 session
 page <- scrape(session)  
```
scraping the title 
```{r}
 title <- page%>%html_nodes('h3.ipc-title__text')%>%html_text()
 title
```
scraping the rating 
```{r}
ratings <- page %>% 
  html_nodes("span.ipc-rating-star--rating") %>%
  html_text()
ratings
```
scraping the numbers of vote 
```{r}
number_votes <- page %>%
  html_nodes("span.ipc-rating-star--voteCount") %>%
  html_text()
number_votes
```
scraping the number of episode 
```{r}
num_ep <- page %>%
  html_nodes("span.sc-5bc66c50-6.OOdsw.cli-title-metadata-item") %>%
  html_text()
num_ep
```
Cleaning the episode data 
```{r}
# episode_counts <- str_extract(num_ep, "\\d+ eps")
# episode_counts <- str_remove(episode_counts, " eps")
# episode_counts <- as.numeric(episode_counts)
# episode_counts
```
scraping the year 
```{r}
year <- page %>%
  html_nodes("span.sc-5bc66c50-6.OOdsw.cli-title-metadata-item") %>%
  html_text()

```

```{r}
title_list <- as.data.frame(title[1:50])
colnames(title_list)<-"ranks"

```
spliting the data frame 
```{r}
split_df <- strsplit(as.character(title_list$ranks),".",fixed = TRUE)
split_df<- data.frame(do.call(rbind,split_df))
split_df
```
renaming columns
```{r}
split_df<-split_df[-c(3,4)]
colnames(split_df)<- c("Ranks","Titles")
split_df
```
creating csv
```{r}
rank_title <- data.frame(
  rank_title = split_df)

write.csv(rank_title,file = "title.csv")

```


